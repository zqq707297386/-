## 配置ssl ##

>####网站地址：[https://startssl.com/](https://startssl.com/)


![](http://i.imgur.com/EqQIvAz.png)


>####登录后选择here


![](http://i.imgur.com/oGWsCRq.png)


>####点击Validatiions Wizard 选择 Domain Validation 点击Continue


![](http://i.imgur.com/8Wl92BQ.png)


>####填入域名


![](http://i.imgur.com/LzbCxbM.png)


>####然后点击Certificates Wizard填入两个域名（最多可填5个)


![](http://i.imgur.com/nuHdtVN.png)


>####点击Generated by myself
    > 在终端执行root@iZ28g3ay5xtZ:~# openssl req -newkey rsa:2048 -keyout zqqblog.key -outzqqblog.csr
>####     （可自填.key-out 可自填.csr）

![](http://i.imgur.com/qbspkAq.png)

    Enter PEM pass phrase:zqqblog（自定义验证码）
    
    Verifying - Enter PEM pass phrase:zqqblog
    
    Country Name (2 letter code) [AU]:CN（国家名字）
    
    State or Province Name (full name) [Some-State]:Dabu（省份名字）
    
    Locality Name (eg, city) []:Guangzhou （城市名字）
    
    Organization Name (eg, company) [Internet Widgits Pty Ltd]:zqqblog （组织名字）
    
    Organizational Unit Name (eg, section) []: （直接Enter）
    
    Common Name (e.g. server FQDN or YOUR name) []:zqq（常用名字）
    
    Email Address []:707297386@qq.com（常用邮箱地址）
    
    A challenge password []:zqqblog（私钥保护密码）
    
    An optional company name []:（直接Enter）
    
    ls就能看到生成的zqqblog.key、zqqblog.csr两个文件



>####然后cat zqqblog.csr 将显示出的所有代码复制到框框中 点击sublime

![](http://i.imgur.com/0ujWIte.png)

>####点击here下载证书（得到的是zip文件）
![](http://i.imgur.com/TH2Ag2f.png)
> 
>     解压相对应服务器的证书，将证书放入到~#目录下 ls可以看到刚放上来的1_zqqblog.top_bundle.crt文件
>     
>     cat zqqblog.key（解密zqqblog.key）复制到ToolBox/Decrypt Private Key框框中Passphrase填写你刚设置的密码
![](http://i.imgur.com/5B1aGrv.png)

![](http://i.imgur.com/8Ao57yV.png)

>####点击Decrypt生成解密后的代码


![](http://i.imgur.com/54X3Fvu.png)

>     来到终端执行vim zqqblog_de.key把解密后的代码复制进去。保存退出
>     创建目录以便管理ssl  mkdir /etc/nginx/ssl
>     
>     然后执行：
>     cp 1_zqqblog.top_bundle.crt /etc/nginx/ssl
>     cp zqqblog_de.key /etc/nginx/ssl
>     cd /etc/nginx/ssl/ 给1_zqqblog.top_bundle.crt权限 
>       
>     执行 sudo chmod -R 775 1_zqqblog.top_bundle.crt     
>     执行sudo vim /etc/nginx/sites-available/default（配置服务器）

>####把HTTPS server的注释去掉具体配置如下：
![](http://i.imgur.com/TotQ9N2.png)

>     配置好后重新读取配置文件，重启nginx服务
>     sudo service nginx reload
>     sudo service nginx restart

完毕！

![](http://i.imgur.com/pALA9c4.png)

>####把http重定向为https

    sudo vim /etc/nginx/sites-available/default
    
    加入return 301 https://zqqblog.top$request_uri;

![](http://i.imgur.com/jNhZZZp.png)

    sudo service nginx reload
    
    sudo service nginx restart